<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>mx-qual用户手册 &mdash; moffettdoc v1.0 文档</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/my_theme.css?v=5b4135ee" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/highlight.css?v=af260240" />

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=5a3fd9cb"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../_static/translations.js?v=beaddf03"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../../genindex.html" />
    <link rel="search" title="搜索" href="../../../search.html" />
    <link rel="next" title="mx-smi用户手册" href="smi-userguide.html" />
    <link rel="prev" title="mx-mft 用户文档" href="mx-mft-userguide.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            moffettdoc
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="搜索文档" aria-label="搜索文档" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="导航菜单">
              <p class="caption" role="heading"><span class="caption-text">墨芯产品文档</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">MACS系统用户手册</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../overview.html">MACS 产品手册</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release_notes.html">发布日志</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/index.html">安装指南</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">工具</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="mx-mft-userguide.html">mx-mft 用户文档</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">mx-qual用户手册</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">概述</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">使用方法</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="smi-userguide.html">mx-smi用户手册</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../sola-demo/index.html">SOLA示例验证手册</a></li>
<li class="toctree-l2"><a class="reference internal" href="../AI-Native/index.html">Moffett 云原生</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="移动版导航菜单" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">moffettdoc</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="页面导航">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">MACS系统用户手册</a></li>
          <li class="breadcrumb-item"><a href="index.html">工具</a></li>
      <li class="breadcrumb-item active">mx-qual用户手册</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/docs/macs-1.1/tool/qual-userguide.md.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="mx-qual">
<h1>mx-qual用户手册<a class="headerlink" href="#mx-qual" title="Link to this heading"></a></h1>
<section id="id1">
<h2>概述<a class="headerlink" href="#id1" title="Link to this heading"></a></h2>
<p>本文档介绍了 <code class="docutils literal notranslate"><span class="pre">mx-qual</span></code>(MOFFETT QUALIFICATION )工具的使用方法。<code class="docutils literal notranslate"><span class="pre">mx-qual</span></code> 是基于 <code class="docutils literal notranslate"><span class="pre">SOLA</span> <span class="pre">Runtime</span> <span class="pre">API</span></code> 实现的设备质量测试工具，主要用于检测设备的可用性、稳定性、性能等方面的指标。</p>
</section>
<section id="id2">
<h2>使用方法<a class="headerlink" href="#id2" title="Link to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">mx-qual</span></code> 是一个命令行工具，可以通过 <code class="docutils literal notranslate"><span class="pre">mx-qual</span> <span class="pre">-h</span></code> 查看帮助信息。</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>Moffett<span class="w"> </span>Quality<span class="w"> </span>Inspection<span class="w"> </span>Application<span class="w">  </span>v1.2.0
Usage:<span class="w"> </span>mx-qual<span class="w"> </span><span class="o">[</span>OPTIONS<span class="o">]</span><span class="w"> </span>SUBCOMMAND

Options:
<span class="w">  </span>-h,--help<span class="w">                   </span>Print<span class="w"> </span>this<span class="w"> </span><span class="nb">help</span><span class="w"> </span>message<span class="w"> </span>and<span class="w"> </span><span class="nb">exit</span>
<span class="w">  </span>--version<span class="w">                   </span>Display<span class="w"> </span>program<span class="w"> </span>version<span class="w"> </span>information<span class="w"> </span>and<span class="w"> </span><span class="nb">exit</span>

Subcommands:
<span class="w">  </span>list<span class="w">                        </span>List<span class="w"> </span>all<span class="w"> </span>devices<span class="w"> </span>detected<span class="w"> </span>on<span class="w"> </span>the<span class="w"> </span>system
<span class="w">  </span>hardware_link<span class="w">               </span>Run<span class="w"> </span>hardware<span class="w"> </span>link<span class="w"> </span><span class="nb">test</span>
<span class="w">  </span>pcie_bandwidth<span class="w">              </span>Run<span class="w"> </span>PCIe<span class="w"> </span>bandwidth<span class="w"> </span><span class="nb">test</span>
<span class="w">  </span>memory_bandwidth<span class="w">            </span>Run<span class="w"> </span>memory<span class="w"> </span>bandwidth<span class="w"> </span><span class="nb">test</span>
<span class="w">  </span>p2p<span class="w">                         </span>Run<span class="w"> </span>peer<span class="w"> </span>to<span class="w"> </span>peer<span class="w"> </span><span class="nb">test</span>
<span class="w">  </span>compute<span class="w">                     </span>Run<span class="w"> </span>computing<span class="w"> </span>power<span class="w"> </span><span class="nb">test</span>
<span class="w">  </span>stress<span class="w">                      </span>Run<span class="w"> </span>stress<span class="w"> </span><span class="nb">test</span>
<span class="w">  </span>memtest<span class="w">                     </span>Run<span class="w"> </span>hardware<span class="w"> </span>memory<span class="w"> </span><span class="nb">test</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">mx-qual</span></code> 以子命令的方式去执行相应的测试，子命令的使用方法可以通过 <code class="docutils literal notranslate"><span class="pre">mx-qual</span> <span class="pre">&lt;sub_command&gt;</span> <span class="pre">-h</span></code> 查看。</p>
<section id="id3">
<h3>子命令说明<a class="headerlink" href="#id3" title="Link to this heading"></a></h3>
<section id="list">
<h4>list<a class="headerlink" href="#list" title="Link to this heading"></a></h4>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>List devices
Usage: mx-qual list [OPTIONS]

Options:
  -h,--help                   Print this help message and exit
  -i,--index UINT:INT in [0 - 31] ...
                              The device index you specified (default: all). Separate values with spaces.
                              Or give a list of elements, separated by commas and enclosed in curly brackets e.g. {1,2,3}
</pre></div>
</div>
<p>列出指定的设备信息，如果不指定设备，则列出所有设备信息。</p>
<p>测试命令示例：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># 列出所有设备</span>
mx-qual<span class="w"> </span>list
<span class="c1"># 列出指定设备</span>
mx-qual<span class="w"> </span>list<span class="w"> </span>-i<span class="w"> </span><span class="m">0</span>
mx-qual<span class="w"> </span>list<span class="w"> </span>-i<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span>
mx-qual<span class="w"> </span>list<span class="w"> </span>-i<span class="w"> </span><span class="o">{</span><span class="m">0</span>,1,2<span class="o">}</span>
</pre></div>
</div>
<p>输出结果示例：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>Device<span class="w"> </span><span class="m">0</span>:<span class="w"> </span><span class="s2">&quot;01S30-00A&quot;</span>
<span class="w">  </span>Serial<span class="w"> </span>number:<span class="w">      </span><span class="m">2023243080074</span>
<span class="w">  </span>PCI<span class="w"> </span>Bus<span class="w"> </span>ID:<span class="w">         </span><span class="m">0000</span>:8a:00.0
<span class="w">  </span>Runtime<span class="w"> </span>version:<span class="w">    </span><span class="m">3</span>.4.0
<span class="w">  </span>Driver<span class="w"> </span>version:<span class="w">     </span><span class="m">3</span>.4.0
<span class="w">  </span>Firmware<span class="w"> </span>version:<span class="w">   </span><span class="m">1</span>.0.14
</pre></div>
</div>
</section>
<section id="hardware-link">
<h4>hardware_link<a class="headerlink" href="#hardware-link" title="Link to this heading"></a></h4>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Run hardware link test
Usage: mx-qual hardware_link [OPTIONS]

Options:
  -h,--help                   Print this help message and exit
</pre></div>
</div>
<p>运行硬件链路测试，测试驱动和所有设备的通信链路是否正常。</p>
<p>测试命令示例：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>mx-qual<span class="w"> </span>hardware_link
</pre></div>
</div>
<p>输出结果示例：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Test driver link... ok
Test device count... ok
Test device link... ok
</pre></div>
</div>
</section>
<section id="pcie-bandwidth">
<h4>pcie_bandwidth<a class="headerlink" href="#pcie-bandwidth" title="Link to this heading"></a></h4>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Usage: mx-qual pcie_bandwidth [OPTIONS]

Options:
  -h,--help                   Print this help message and exit
  -i,--index UINT:INT in [0 - 31] ...
                              The device index you specified (default: all). Separate values with spaces.
                              Or give a list of elements, separated by commas and enclosed in curly brackets e.g. {1,2,3}
  -s,--sn TEXT                The device sn you specified.
                              
  -d,--data_size UINT:INT in [32 - 100]
                              The transfer size (MB) you specified. (default 100MB)
                              
  -l,--loop INT:INT in [1 - 100]
                              The number of test loop (default: 1)
                              
  -f,--full_duplex            Enable full duplex mode
</pre></div>
</div>
<p>运行 PCIe 带宽测试，不指定设备时默认测试所有设备，可以通过<code class="docutils literal notranslate"><span class="pre">-i</span></code>指定设备的<code class="docutils literal notranslate"><span class="pre">index</span></code>，也可以通过<code class="docutils literal notranslate"><span class="pre">-s</span></code>指定设备的<code class="docutils literal notranslate"><span class="pre">sn</span></code>，<code class="docutils literal notranslate"><span class="pre">-s</span></code>的优先级比<code class="docutils literal notranslate"><span class="pre">-i</span></code>高，若同时指定了<code class="docutils literal notranslate"><span class="pre">-i</span></code>和<code class="docutils literal notranslate"><span class="pre">-s</span></code>，则只测试<code class="docutils literal notranslate"><span class="pre">-s</span></code>指定的设备。</p>
<p>测试的数据大小可以通过<code class="docutils literal notranslate"><span class="pre">-d</span></code>指定，单位为MB，默认为100MB，测试的循环次数可以通过<code class="docutils literal notranslate"><span class="pre">-l</span></code>指定，默认为1次。默认进行半双工测试，使用<code class="docutils literal notranslate"><span class="pre">-f</span></code>可以开启全双工测试。</p>
<p>测试命令示例：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>mx-qual<span class="w"> </span>pcie_bandwidth
mx-qual<span class="w"> </span>pcie_bandwidth<span class="w"> </span>-i<span class="w"> </span><span class="m">0</span>
mx-qual<span class="w"> </span>pcie_bandwidth<span class="w"> </span>-i<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span>
mx-qual<span class="w"> </span>pcie_bandwidth<span class="w"> </span>-s<span class="w"> </span><span class="m">2023243080096</span>
mx-qual<span class="w"> </span>pcie_bandwidth<span class="w"> </span>--sn<span class="o">=</span><span class="m">2023243080096</span>
mx-qual<span class="w"> </span>pcie_bandwidth<span class="w"> </span>-i<span class="w"> </span><span class="m">0</span><span class="w"> </span>-d<span class="w"> </span><span class="m">32</span><span class="w"> </span>-l<span class="w"> </span><span class="m">10</span>
mx-qual<span class="w"> </span>pcie_bandwidth<span class="w"> </span>-f<span class="w"> </span>-l<span class="w"> </span><span class="m">10</span>
</pre></div>
</div>
<p>输出结果示例：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>PCIe Bandwidth Test
 Device id: [0]

 Host to Device Bandwidth
 Transfer Size: 100.000 MB, Bandwidth: 11.947 GB/s

 Device to Host Bandwidth
 Transfer Size: 100.000 MB, Bandwidth: 12.139 GB/s

Result = PASS
</pre></div>
</div>
</section>
<section id="memory-bandwidth">
<h4>memory_bandwidth<a class="headerlink" href="#memory-bandwidth" title="Link to this heading"></a></h4>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Run memory bandwidth test
Usage: mx-qual memory_bandwidth [OPTIONS]

Options:
  -h,--help                   Print this help message and exit
  -i,--index UINT:INT in [0 - 31] ...
                              The device index you specified (default: all). Separate values with spaces.
                              Or give a list of elements, separated by commas and enclosed in curly brackets e.g. {1,2,3}
  -s,--sn TEXT                The device sn you specified.
                              
  -d,--data_size UINT:INT in [32 - 100]
                              The transfer size (MB) you specified. (default 100MB)
                              
  -l,--loop INT:INT in [1 - 100]
                              The number of test loop (default: 1)
</pre></div>
</div>
<p>运行设备内存带宽测试，不指定设备时默认测试所有设备，可以通过<code class="docutils literal notranslate"><span class="pre">-i</span></code>指定设备的<code class="docutils literal notranslate"><span class="pre">index</span></code>，也可以通过<code class="docutils literal notranslate"><span class="pre">-s</span></code>指定设备的<code class="docutils literal notranslate"><span class="pre">sn</span></code>，<code class="docutils literal notranslate"><span class="pre">-s</span></code>的优先级比<code class="docutils literal notranslate"><span class="pre">-i</span></code>高，若同时指定了<code class="docutils literal notranslate"><span class="pre">-i</span></code>和<code class="docutils literal notranslate"><span class="pre">-s</span></code>，则只测试<code class="docutils literal notranslate"><span class="pre">-s</span></code>指定的设备。</p>
<p>测试的数据大小可以通过<code class="docutils literal notranslate"><span class="pre">-d</span></code>指定，单位为MB，默认为100MB，测试的循环次数可以通过<code class="docutils literal notranslate"><span class="pre">-l</span></code>指定，默认为1次。</p>
<p>测试命令示例：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>mx-qual<span class="w"> </span>memory_bandwidth
mx-qual<span class="w"> </span>memory_bandwidth<span class="w"> </span>-i<span class="w"> </span><span class="m">0</span>
mx-qual<span class="w"> </span>memory_bandwidth<span class="w"> </span>-i<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span>
mx-qual<span class="w"> </span>memory_bandwidth<span class="w"> </span>-s<span class="w"> </span><span class="m">2023243080096</span>
mx-qual<span class="w"> </span>memory_bandwidth<span class="w"> </span>--sn<span class="o">=</span><span class="m">2023243080096</span>
mx-qual<span class="w"> </span>memory_bandwidth<span class="w"> </span>-i<span class="w"> </span><span class="m">0</span><span class="w"> </span>-d<span class="w"> </span><span class="m">32</span><span class="w"> </span>-l<span class="w"> </span><span class="m">10</span>
</pre></div>
</div>
<p>输出结果示例：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Memory Bandwidth Test
 Device id: [0]

 Memory Read  Bandwidth
 Transfer Size: 100.000 MB, Bandwidth: 50.187 GB/s

 Memory Write Bandwidth
 Transfer Size: 100.000 MB, Bandwidth: 50.053 GB/s

Result = PASS
</pre></div>
</div>
</section>
<section id="p2p">
<h4>P2P<a class="headerlink" href="#p2p" title="Link to this heading"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Run<span class="w"> </span>peer<span class="w"> </span>to<span class="w"> </span>peer<span class="w"> </span><span class="nb">test</span>
Usage:<span class="w"> </span>mx-qual<span class="w"> </span>p2p<span class="w"> </span><span class="o">[</span>OPTIONS<span class="o">]</span>

Options:
<span class="w">  </span>-h,--help<span class="w">                   </span>Print<span class="w"> </span>this<span class="w"> </span><span class="nb">help</span><span class="w"> </span>message<span class="w"> </span>and<span class="w"> </span><span class="nb">exit</span>
<span class="w">  </span>-i,--index<span class="w"> </span>UINT:INT<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">[</span><span class="m">0</span><span class="w"> </span>-<span class="w"> </span><span class="m">31</span><span class="o">]</span><span class="w"> </span>...
<span class="w">                              </span>Devices<span class="w"> </span>index<span class="w"> </span>you<span class="w"> </span>specified<span class="w"> </span><span class="o">(</span>default:<span class="w"> </span>all<span class="o">)</span>.<span class="w"> </span>Separate<span class="w"> </span>values<span class="w"> </span>with<span class="w"> </span>spaces.
<span class="w">                              </span>Or<span class="w"> </span>give<span class="w"> </span>a<span class="w"> </span>list<span class="w"> </span>of<span class="w"> </span>elements,<span class="w"> </span>separated<span class="w"> </span>by<span class="w"> </span>commas<span class="w"> </span>and<span class="w"> </span>enclosed<span class="w"> </span><span class="k">in</span><span class="w"> </span>curly<span class="w"> </span>brackets<span class="w"> </span>e.g.<span class="w"> </span><span class="o">{</span><span class="m">0</span>,1,2<span class="o">}</span>
</pre></div>
</div>
<p>运行 <code class="docutils literal notranslate"><span class="pre">peer-to-peer</span></code> 带宽测试，不指定设备则默认测试所有设备，可以通过<code class="docutils literal notranslate"><span class="pre">-i</span></code>指定运行设备的 <code class="docutils literal notranslate"><span class="pre">index</span></code>，所有有效设备会两两配对进行测试。</p>
<p>测试命令示例：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mx-qual<span class="w"> </span>p2p
mx-qual<span class="w"> </span>p2p<span class="w"> </span>-i<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span>
</pre></div>
</div>
<p>输出结果示例：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>P2P<span class="w"> </span>Connectivity<span class="w"> </span>Matrix
<span class="w">    </span>D/D<span class="w">      </span><span class="m">0</span><span class="w">      </span><span class="m">1</span><span class="w">      </span><span class="m">2</span>
<span class="w">    </span><span class="m">0</span><span class="w">        </span><span class="m">0</span><span class="w">      </span><span class="m">1</span><span class="w">      </span><span class="m">1</span>
<span class="w">    </span><span class="m">1</span><span class="w">        </span><span class="m">1</span><span class="w">      </span><span class="m">0</span><span class="w">      </span><span class="m">1</span>
<span class="w">    </span><span class="m">2</span><span class="w">        </span><span class="m">1</span><span class="w">      </span><span class="m">1</span><span class="w">      </span><span class="m">0</span>

Unidirectional<span class="w"> </span>P2P<span class="w"> </span>Bandwidth<span class="w"> </span>Matrix<span class="w"> </span><span class="o">(</span>GB/s<span class="o">)</span>
<span class="w">    </span>D/D<span class="w">      </span><span class="m">0</span><span class="w">      </span><span class="m">1</span><span class="w">      </span><span class="m">2</span>
<span class="w">    </span><span class="m">0</span><span class="w">     </span><span class="m">0</span>.00<span class="w">  </span><span class="m">10</span>.96<span class="w">  </span><span class="m">10</span>.96
<span class="w">    </span><span class="m">1</span><span class="w">    </span><span class="m">10</span>.94<span class="w">   </span><span class="m">0</span>.00<span class="w">  </span><span class="m">10</span>.79
<span class="w">    </span><span class="m">2</span><span class="w">    </span><span class="m">10</span>.91<span class="w">  </span><span class="m">10</span>.92<span class="w">   </span><span class="m">0</span>.00

Bidirectional<span class="w"> </span>P2P<span class="w"> </span>Bandwidth<span class="w"> </span>Matrix<span class="w"> </span><span class="o">(</span>GB/s<span class="o">)</span>
<span class="w">    </span>D/D<span class="w">      </span><span class="m">0</span><span class="w">      </span><span class="m">1</span><span class="w">      </span><span class="m">2</span>
<span class="w">    </span><span class="m">0</span><span class="w">     </span><span class="m">0</span>.00<span class="w">  </span><span class="m">11</span>.38<span class="w">  </span><span class="m">11</span>.37
<span class="w">    </span><span class="m">1</span><span class="w">    </span><span class="m">11</span>.38<span class="w">   </span><span class="m">0</span>.00<span class="w">  </span><span class="m">11</span>.34
<span class="w">    </span><span class="m">2</span><span class="w">    </span><span class="m">11</span>.37<span class="w">  </span><span class="m">11</span>.34<span class="w">   </span><span class="m">0</span>.00

P2P<span class="w"> </span>Latency<span class="w"> </span>Matrix<span class="w"> </span><span class="o">(</span>us<span class="o">)</span>
<span class="w">    </span>SPU<span class="w">      </span><span class="m">0</span><span class="w">      </span><span class="m">1</span><span class="w">      </span><span class="m">2</span>
<span class="w">    </span><span class="m">0</span><span class="w">     </span><span class="m">0</span>.00<span class="w"> </span><span class="m">121</span>.66<span class="w"> </span><span class="m">115</span>.52
<span class="w">    </span><span class="m">1</span><span class="w">   </span><span class="m">101</span>.10<span class="w">   </span><span class="m">0</span>.00<span class="w"> </span><span class="m">105</span>.69
<span class="w">    </span><span class="m">2</span><span class="w">   </span><span class="m">126</span>.04<span class="w"> </span><span class="m">137</span>.34<span class="w">   </span><span class="m">0</span>.00

<span class="w">    </span>CPU<span class="w">      </span><span class="m">0</span><span class="w">      </span><span class="m">1</span><span class="w">      </span><span class="m">2</span>
<span class="w">    </span><span class="m">0</span><span class="w">     </span><span class="m">0</span>.00<span class="w"> </span><span class="m">125</span>.62<span class="w"> </span><span class="m">118</span>.89
<span class="w">    </span><span class="m">1</span><span class="w">   </span><span class="m">103</span>.60<span class="w">   </span><span class="m">0</span>.00<span class="w"> </span><span class="m">109</span>.61
<span class="w">    </span><span class="m">2</span><span class="w">   </span><span class="m">129</span>.72<span class="w"> </span><span class="m">141</span>.06<span class="w">   </span><span class="m">0</span>.00
</pre></div>
</div>
</section>
<section id="stress">
<h4>stress<a class="headerlink" href="#stress" title="Link to this heading"></a></h4>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Run stress test
Usage: mx-qual stress [OPTIONS]

Options:
  -h,--help                   Print this help message and exit
  -i,--index UINT:INT in [0 - 31] ...
                              The device index you specified (default: all). Separate values with spaces.
                              Or give a list of elements, separated by commas and enclosed in curly brackets e.g. {1,2,3}
  -t,--time INT:INT in [2 - 1440]
                              Number of minutes consumed in a single stress test. (default: 2)
                              The deviation is subject to the influence of the machine.
  -l,--loop INT:INT in [1 - 99999]
                              The number of test loop, each loop takes approximately 2 minutes, or the time specified by --time. (default: 1)
</pre></div>
</div>
<p>运行压力测试，不指定设备时默认测试所有设备，可以通过<code class="docutils literal notranslate"><span class="pre">-i</span></code>指定设备的<code class="docutils literal notranslate"><span class="pre">index</span></code>。测试的循环次数和一次的时间可以通过<code class="docutils literal notranslate"><span class="pre">-l</span></code>和<code class="docutils literal notranslate"><span class="pre">-t</span></code>指定，默认执行一次循环，一次循环持续2分钟。若需要测试一小时，那么可以指定<code class="docutils literal notranslate"><span class="pre">-l</span> <span class="pre">30</span></code>或者<code class="docutils literal notranslate"><span class="pre">-t</span> <span class="pre">60</span></code>。</p>
<p>运行的前一分钟，会先让设备预热，不会监控设备状态。一分钟后，会监控设备的温度、功率和利用率，每隔一秒刷新一次，同时还会在当前目录下生成 <code class="docutils literal notranslate"><span class="pre">mx-qual-stress.log</span></code> 文件，可以用于后续分析。压测完成后，会输出压测过程中的整体信息。</p>
<p>测试命令示例：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># 压测2分钟</span>
mx-qual<span class="w"> </span>stress
<span class="c1"># 压测60分钟</span>
mx-qual<span class="w"> </span>stress<span class="w"> </span>-l<span class="w"> </span><span class="m">30</span>
</pre></div>
</div>
<p>输出结果示例：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>device  temp.cur  temp.avg  power.cur  power.avg  util.cur  util.avg
0       68        65        79         76         99        98        
1       71        68        77         76         99        98        
2       70        67        80         78         99        98        
3       72        69        79         78         99        98        
4       69        66        83         77         99        98        
5       67        64        79         77         99        98
</pre></div>
</div>
</section>
<section id="compute">
<h4>compute<a class="headerlink" href="#compute" title="Link to this heading"></a></h4>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Run computing power test
Usage: mx-qual compute [OPTIONS] op dtype

Positionals:
  op        REQUIRED          Support op: conv2d / multiply

  dtype     REQUIRED          Support type: int8 / bf16
                              note: multiply only support bf16

Options:
  -h,--help                   Print this help message and exit
  --sparsity INT:{8,16,32}    Support: 8 / 16 /32
                              Only used by conv2d
  --iochannel INT:{256,512}   Support: 256, 512
                              Only used by conv2d
</pre></div>
</div>
<p>运行算力测试。可以测试的算子类型有<code class="docutils literal notranslate"><span class="pre">conv2d</span></code>和<code class="docutils literal notranslate"><span class="pre">multiply</span></code>，可以通过<code class="docutils literal notranslate"><span class="pre">conv2d</span></code>和<code class="docutils literal notranslate"><span class="pre">multiply</span></code>指定。每个算子类型可配置的参数不同。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">conv2d</span></code></p></li>
<li><p>支持两种数据类型: <code class="docutils literal notranslate"><span class="pre">int8</span></code> 和 <code class="docutils literal notranslate"><span class="pre">bf16</span></code></p></li>
<li><p>支持配置以下参数：</p>
<ol class="simple">
<li><p>sparsity : 8 / 16 / 32</p></li>
<li><p>iochannel : 256 / 512 (ichannel = ochannel)</p></li>
</ol>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">multiply</span></code></p></li>
<li><p>仅支持一种数据类型: <code class="docutils literal notranslate"><span class="pre">bf16</span></code></p></li>
</ul>
<p>测试命令示例：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>mx-qual<span class="w"> </span>compute<span class="w"> </span>conv2d<span class="w"> </span>int8<span class="w"> </span>--sparsity<span class="w"> </span><span class="m">8</span><span class="w"> </span>--iochannel<span class="w"> </span><span class="m">256</span>
mx-qual<span class="w"> </span>compute<span class="w"> </span>multiply<span class="w"> </span>bf16
</pre></div>
</div>
<p>输出结果示例：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>SPU INT8 Target TOPS@8xsparsity: 707.788800 TOPS.
Actual (TensorCore) TOPS@8xSparsity: 697.528523
Actual latency: 0.023750 ms
Utilization: 98.55%

VPU BF16 Target TFLOPS: 9.830400 TFLOPS.
Actual (TensorCore) TFLOPS: 9.084315
Actual latency: 0.003166 ms
Utilization: 92.41%
</pre></div>
</div>
</section>
<section id="memtest">
<h4>memtest<a class="headerlink" href="#memtest" title="Link to this heading"></a></h4>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Run hardware memory test
Usage: mx-qual memtest [OPTIONS]

Options:
  -h,--help                   Print this help message and exit
  -i,--index UINT:INT in [0 - 31] ...
                              The device index you specified (default: all). Separate values with spaces.
                              Or give a list of elements, separated by commas and enclosed in curly brackets e.g. {1,2,3}
  -t,--type UINT:INT in [0 - 10] ...
                              The memory test type you specified (default: 7)
                                type 0          [Walking 1 bit]
                                type 1          [Own address test]
                                type 2          [Moving inversions, ones&amp;zeros]
                                type 3          [Moving inversions, 8 bit pat]
                                type 4          [Moving inversions, random pattern]
                                type 5          [Block move, 64 moves]
                                type 6          [Moving inversions, 32 bit pat]
                                type 7          [Random number sequence]
                                type 8          [Modulo 20, random pattern]
                                type 9          [Bit fade test]
                                type 10         [Memory stress test]

  -l,--loop INT:INT in [1 - 100]
                              The number of test loop (default: 1)
</pre></div>
</div>
<p>这是一个参考<code class="docutils literal notranslate"><span class="pre">MemTest86</span></code>实现的用于测试硬件内存稳定性和可靠性的工具。</p>
<p>可以通过<code class="docutils literal notranslate"><span class="pre">-i</span></code>指定设备的<code class="docutils literal notranslate"><span class="pre">index</span></code>，默认运行所有设备。可以通过<code class="docutils literal notranslate"><span class="pre">-t</span></code>指定测试的类型，可以指定多个类型，类型的取值范围为0-10，具体的类型含义可以参考<code class="docutils literal notranslate"><span class="pre">MemTest86</span></code>的说明，默认是7。可以通过<code class="docutils literal notranslate"><span class="pre">-l</span></code>指定测试的循环次数，默认为1次。</p>
<p>测试命令示例：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>mx-qual<span class="w"> </span>memtest
mx-qual<span class="w"> </span>memtest<span class="w"> </span>-i<span class="w"> </span><span class="m">0</span><span class="w"> </span>-t<span class="w"> </span><span class="m">0</span>
</pre></div>
</div>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="页脚">
        <a href="mx-mft-userguide.html" class="btn btn-neutral float-left" title="mx-mft 用户文档" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="smi-userguide.html" class="btn btn-neutral float-right" title="mx-smi用户手册" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2024, zhaoyang.li。</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用的 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a> 开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>